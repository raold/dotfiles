#################################
#          Polybar Setup        #
#    With Transparency & Blur   #
#################################

#################################
#             Shadows           #
#################################

shadow = true;
shadow-radius = 7;
shadow-offset-x = -7;
shadow-offset-y = -7;

# Exclude polybar from shadows (it has its own styling)
shadow-exclude = [
  "class_g = 'Polybar'"
];

#################################
#           Fading              #
#################################

fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;

#################################
#   Transparency / Opacity      #
#################################

# Inactive window opacity
inactive-opacity = 1.0;

# Active window opacity
active-opacity = 1.0;

frame-opacity = 0.9;

# Opacity rules for specific windows
opacity-rule = [
  "90:class_g = 'Polybar'"
];

#################################
#           Corners             #
#################################

corner-radius = 0;

#################################
#            Blur               #
#################################

# Enable blur
blur-background = true;

# Blur method - dual_kawase is fast and looks good
blur-method = "dual_kawase";

# Blur strength (1-20, higher = more blur)
blur-strength = 5;

# Blur background of windows when the frame is not opaque
blur-background-frame = true;

# Fixed blur strength
blur-background-fixed = true;

# Apply blur to polybar
blur-background-exclude = [
  # Add windows to exclude from blur here
  # "class_g = 'SomeApp'"
];

#################################
#       General Settings        #
#################################

# GLX backend required for blur
backend = "glx";

# Enable dithering for smoother gradients
dithered-present = false;

# VSync to prevent tearing
vsync = true;

# Detect rounded corners
detect-rounded-corners = true;

# Detect client opacity
detect-client-opacity = true;

# GLX settings for performance
glx-no-stencil = true;
glx-no-rebind-pixmap = true;

# Use X Sync fence for better performance
xrender-sync-fence = true;

#################################
#     Window Type Settings      #
#################################

wintypes:
{
  tooltip = { fade = true; shadow = true; opacity = 0.9; focus = true; full-shadow = false; };
  dock = { shadow = false; clip-shadow-above = true; };
  dnd = { shadow = false; };
  popup_menu = { opacity = 0.95; };
  dropdown_menu = { opacity = 0.95; };
};
