<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "urn:fontconfig:fonts.dtd">
<!--
  macOS-inspired font rendering for HiDPI displays
  Philosophy: Prioritize glyph shape fidelity over pixel-grid snapping
-->
<fontconfig>

  <!-- ═══════════════════════════════════════════════════════════════════════
       GLOBAL RENDERING DEFAULTS (macOS-like)
       ═══════════════════════════════════════════════════════════════════════ -->

  <match target="font">
    <!-- Antialiasing: Always on -->
    <edit name="antialias" mode="assign"><bool>true</bool></edit>

    <!-- Hinting: Slight = preserve glyph shapes (macOS approach)
         Options: hintnone, hintslight, hintmedium, hintfull
         macOS historically used no hinting on Retina, slight is a good compromise -->
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintslight</const></edit>

    <!-- Subpixel rendering: Off for HiDPI (like macOS Retina)
         At 1.17x scale on 2256x1504, pixel density is high enough that
         grayscale AA looks smooth without subpixel color fringing -->
    <edit name="rgba" mode="assign"><const>none</const></edit>

    <!-- LCD filter: Only matters if rgba is enabled, but set anyway -->
    <edit name="lcdfilter" mode="assign"><const>lcddefault</const></edit>

    <!-- Autohinter: Off, use font's native hints -->
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
  </match>

  <!-- ═══════════════════════════════════════════════════════════════════════
       STEM DARKENING (the "macOS heavier fonts" effect)
       Requires FreeType 2.10.3+ with FREETYPE_PROPERTIES env var
       ═══════════════════════════════════════════════════════════════════════ -->

  <!-- This is handled via environment variable, see hyprland-specific.conf -->

  <!-- ═══════════════════════════════════════════════════════════════════════
       DISABLE EMBEDDED BITMAPS (use vector glyphs for sharpness)
       ═══════════════════════════════════════════════════════════════════════ -->

  <match target="font">
    <edit name="embeddedbitmap" mode="assign"><bool>false</bool></edit>
  </match>

  <!-- ═══════════════════════════════════════════════════════════════════════
       FONT SUBSTITUTIONS (improve default fonts)
       ═══════════════════════════════════════════════════════════════════════ -->

  <!-- Use Inter as default sans-serif (clean, modern, macOS-esque) -->
  <alias>
    <family>sans-serif</family>
    <prefer>
      <family>Inter</family>
      <family>Noto Sans</family>
    </prefer>
  </alias>

  <!-- Use JetBrains Mono for monospace (excellent at all sizes) -->
  <alias>
    <family>monospace</family>
    <prefer>
      <family>JetBrainsMono Nerd Font</family>
      <family>JetBrains Mono</family>
      <family>Noto Sans Mono</family>
    </prefer>
  </alias>

  <!-- Emoji support -->
  <alias>
    <family>emoji</family>
    <prefer>
      <family>Noto Color Emoji</family>
    </prefer>
  </alias>

</fontconfig>
