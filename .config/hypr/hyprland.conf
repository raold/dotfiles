# Hyprland config - Dynamic Wayland compositor
# Keybindings synced from wm-common/ via translator script
# See: https://wiki.hyprland.org

# ═══════════════════════════════════════════════════════════════════════════════
# SOURCE MODULAR CONFIGS
# ═══════════════════════════════════════════════════════════════════════════════

source = ~/.config/hypr/colors.conf
source = ~/.config/hypr/keybindings.conf
source = ~/.config/hypr/workspaces.conf
source = ~/.config/hypr/window-rules.conf
source = ~/.config/hypr/hyprland-specific.conf

# ═══════════════════════════════════════════════════════════════════════════════
# MONITOR CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

monitor = eDP-1, 2256x1504@60, 0x0, 1

# ═══════════════════════════════════════════════════════════════════════════════
# INPUT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

input {
    kb_layout = us
    repeat_rate = 50
    repeat_delay = 300

    touchpad {
        natural_scroll = true
        tap-to-click = true
        disable_while_typing = true
    }

    sensitivity = 0.3
}

# ═══════════════════════════════════════════════════════════════════════════════
# GENERAL SETTINGS
# ═══════════════════════════════════════════════════════════════════════════════

general {
    gaps_in = 10
    gaps_out = 10 10 20 10
    border_size = 0
    col.active_border = $orange
    col.inactive_border = $bg_soft
    layout = dwindle
}

# ═══════════════════════════════════════════════════════════════════════════════
# DECORATION - MINIMAL FOR BATTERY LIFE
# ═══════════════════════════════════════════════════════════════════════════════

decoration {
    rounding = 8
    inactive_opacity = 0.90

    blur {
        enabled = true
        size = 6
        passes = 1
        noise = 0.02
        contrast = 1.0
        brightness = 1.0
        new_optimizations = true
        xray = false
    }

    shadow {
        enabled = false
    }
}

# ═══════════════════════════════════════════════════════════════════════════════
# ANIMATIONS - SUBTLE, BATTERY-CONSCIOUS
# ═══════════════════════════════════════════════════════════════════════════════

animations {
    enabled = true

    # Snappy bezier curves
    bezier = snappy, 0.2, 1.0, 0.3, 1.0
    bezier = smoothOut, 0.0, 0.5, 0.5, 1.0

    # Window open: quick fade+slide (200ms)
    animation = windowsIn, 1, 3, snappy, popin 80%
    # Window close: fast fade out (150ms)
    animation = windowsOut, 1, 2, smoothOut, popin 80%
    # Window move/resize: snappy
    animation = windowsMove, 1, 3, snappy
    # Opacity transitions
    animation = fade, 1, 3, snappy
    # Workspace switch: smooth horizontal slide
    animation = workspaces, 1, 3, snappy, slide
    # Scratchpad: slide from top
    animation = specialWorkspace, 1, 3, snappy, slidevert
    # Border color transitions
    animation = border, 1, 4, snappy
}

# ═══════════════════════════════════════════════════════════════════════════════
# LAYER RULES - BLUR ONLY ON BAR AND LAUNCHER
# ═══════════════════════════════════════════════════════════════════════════════

layerrule = blur on, match:namespace waybar
layerrule = ignore_alpha 0.3, match:namespace waybar
layerrule = blur on, match:namespace rofi
layerrule = ignore_alpha 0.3, match:namespace rofi

# ═══════════════════════════════════════════════════════════════════════════════
# LAYOUT
# ═══════════════════════════════════════════════════════════════════════════════

dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    new_status = master
}

# ═══════════════════════════════════════════════════════════════════════════════
# STARTUP APPLICATIONS
# ═══════════════════════════════════════════════════════════════════════════════

# GTK theme setup (ensure icon theme is set before tray applets)
exec-once = gsettings set org.gnome.desktop.interface icon-theme "Gruvbox-Plus-Dark"

# Notifications
exec-once = dunst

# System tray
exec-once = nm-applet --indicator

# Bar
exec-once = waybar

# Wallpaper
exec-once = swaybg -i /home/dro/Pictures/Gruvbox-Archlinux2/Light/3840x2160-light-archlinux2.png -m fill

# Clipboard
exec-once = wl-paste --watch cliphist store

# Idle/Lock
exec-once = hypridle

# Scratchpads
exec-once = [workspace special:dropdown silent] kitty --class dropdown
exec-once = [workspace special:ranger silent] kitty --class ranger-scratch -e ranger
